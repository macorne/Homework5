[
  {
    "objectID": "Homework5.html",
    "href": "Homework5.html",
    "title": "Homework5",
    "section": "",
    "text": "Using provided student-merge.R code\n\n\n#Read in the math data\nmath_data &lt;- read.table(\"student-mat.csv\",sep=\";\",header=TRUE)\n#Read in the Portuguese data\nport_data &lt;- read.table(\"student-por.csv\",sep=\";\",header=TRUE)\n#Merge the data sets\ncomb_data &lt;- merge(math_data,port_data,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"nursery\",\"internet\"))\n\nprint(nrow(comb_data)) # 382 students\n\n[1] 382\n\n\n\nUsing tidyverse\n\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(stringr)\n#Can use read_csv2 but encounter a complaint and recommendation to use read_delim\n\n#Read in the math data\nmath_data &lt;- read_delim(\"student-mat.csv\",delim=\";\",col_names=TRUE)\n\nRows: 395 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#Read in the Portuguese data\nport_data &lt;- read_delim(\"student-por.csv\",delim=\";\",col_names=TRUE)\n\nRows: 649 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#Merge the data sets\ncomb_data &lt;- inner_join(math_data,port_data,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"nursery\",\"internet\")) #Get a many-to-many relationship warning (looks like the same variable names with .x, .y) for Row 79\n\nWarning in inner_join(math_data, port_data, by = c(\"school\", \"sex\", \"age\", : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 79 of `x` matches multiple rows in `y`.\nℹ Row 79 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nTo avoid the warning, we use an inner_join() on all variables other than G1, G2, G3, paid, and absences. We will use this form of the combined data in further exercises.\n\ncomb_data &lt;- inner_join(math_data,port_data,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"guardian\",\"traveltime\",\"studytime\",\"failures\",\"schoolsup\",\"famsup\",\"activities\",\"nursery\",\"higher\",\"internet\",\"romantic\",\"famrel\",\"freetime\",\"goout\",\"Dalc\",\"Walc\",\"health\"))\n\nFor the math data, Portuguese, and combined data, we will look at sex, address, mother’s education, and father’s education. We convert these into factor variables in each tibble (use the same four variables in each) using mutate.\n\n#sex, address, Medu, Fedu\nmath_data &lt;- math_data |&gt; mutate(sex = factor(sex, levels=c(\"F\",\"M\"), labels=c(\"Female\",\"Male\")), address = factor(address, levels=c(\"U\",\"R\"), labels=c(\"Urban\",\"Rural\")), Medu = factor(Medu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")), Fedu = factor(Fedu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")))\nport_data &lt;- port_data |&gt; mutate(sex = factor(sex, levels=c(\"F\",\"M\"), labels=c(\"Female\",\"Male\")), address = factor(address, levels=c(\"U\",\"R\"), labels=c(\"Urban\",\"Rural\")), Medu = factor(Medu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")), Fedu = factor(Fedu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")))\ncomb_data &lt;- comb_data |&gt; mutate(sex = factor(sex, levels=c(\"F\",\"M\"), labels=c(\"Female\",\"Male\")), address = factor(address, levels=c(\"U\",\"R\"), labels=c(\"Urban\",\"Rural\")), Medu = factor(Medu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")), Fedu = factor(Fedu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")))"
  },
  {
    "objectID": "Homework5.html#task-1-read-in-the-data-and-modify",
    "href": "Homework5.html#task-1-read-in-the-data-and-modify",
    "title": "Homework5",
    "section": "",
    "text": "Using provided student-merge.R code\n\n\n#Read in the math data\nmath_data &lt;- read.table(\"student-mat.csv\",sep=\";\",header=TRUE)\n#Read in the Portuguese data\nport_data &lt;- read.table(\"student-por.csv\",sep=\";\",header=TRUE)\n#Merge the data sets\ncomb_data &lt;- merge(math_data,port_data,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"nursery\",\"internet\"))\n\nprint(nrow(comb_data)) # 382 students\n\n[1] 382\n\n\n\nUsing tidyverse\n\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(stringr)\n#Can use read_csv2 but encounter a complaint and recommendation to use read_delim\n\n#Read in the math data\nmath_data &lt;- read_delim(\"student-mat.csv\",delim=\";\",col_names=TRUE)\n\nRows: 395 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#Read in the Portuguese data\nport_data &lt;- read_delim(\"student-por.csv\",delim=\";\",col_names=TRUE)\n\nRows: 649 Columns: 33\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr (17): school, sex, address, famsize, Pstatus, Mjob, Fjob, reason, guardi...\ndbl (16): age, Medu, Fedu, traveltime, studytime, failures, famrel, freetime...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#Merge the data sets\ncomb_data &lt;- inner_join(math_data,port_data,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"nursery\",\"internet\")) #Get a many-to-many relationship warning (looks like the same variable names with .x, .y) for Row 79\n\nWarning in inner_join(math_data, port_data, by = c(\"school\", \"sex\", \"age\", : Detected an unexpected many-to-many relationship between `x` and `y`.\nℹ Row 79 of `x` matches multiple rows in `y`.\nℹ Row 79 of `y` matches multiple rows in `x`.\nℹ If a many-to-many relationship is expected, set `relationship =\n  \"many-to-many\"` to silence this warning.\n\n\nTo avoid the warning, we use an inner_join() on all variables other than G1, G2, G3, paid, and absences. We will use this form of the combined data in further exercises.\n\ncomb_data &lt;- inner_join(math_data,port_data,by=c(\"school\",\"sex\",\"age\",\"address\",\"famsize\",\"Pstatus\",\"Medu\",\"Fedu\",\"Mjob\",\"Fjob\",\"reason\",\"guardian\",\"traveltime\",\"studytime\",\"failures\",\"schoolsup\",\"famsup\",\"activities\",\"nursery\",\"higher\",\"internet\",\"romantic\",\"famrel\",\"freetime\",\"goout\",\"Dalc\",\"Walc\",\"health\"))\n\nFor the math data, Portuguese, and combined data, we will look at sex, address, mother’s education, and father’s education. We convert these into factor variables in each tibble (use the same four variables in each) using mutate.\n\n#sex, address, Medu, Fedu\nmath_data &lt;- math_data |&gt; mutate(sex = factor(sex, levels=c(\"F\",\"M\"), labels=c(\"Female\",\"Male\")), address = factor(address, levels=c(\"U\",\"R\"), labels=c(\"Urban\",\"Rural\")), Medu = factor(Medu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")), Fedu = factor(Fedu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")))\nport_data &lt;- port_data |&gt; mutate(sex = factor(sex, levels=c(\"F\",\"M\"), labels=c(\"Female\",\"Male\")), address = factor(address, levels=c(\"U\",\"R\"), labels=c(\"Urban\",\"Rural\")), Medu = factor(Medu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")), Fedu = factor(Fedu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")))\ncomb_data &lt;- comb_data |&gt; mutate(sex = factor(sex, levels=c(\"F\",\"M\"), labels=c(\"Female\",\"Male\")), address = factor(address, levels=c(\"U\",\"R\"), labels=c(\"Urban\",\"Rural\")), Medu = factor(Medu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")), Fedu = factor(Fedu, levels=c(0,1,2,3,4), labels=c(\"none\", \"primary education (4th grade)\", \"5th to 9th grade\", \"secondary education\", \"higher education\")))"
  },
  {
    "objectID": "Homework5.html#task-2-summarize-the-data-very-basic-eda",
    "href": "Homework5.html#task-2-summarize-the-data-very-basic-eda",
    "title": "Homework5",
    "section": "Task 2: Summarize the Data (Very Basic EDA)",
    "text": "Task 2: Summarize the Data (Very Basic EDA)\nFor the combined data, we will\n\nlook at how the data is stored and see if everything makes sense\ndocument the missing values in the data\n\n\ncomb_data\n\n# A tibble: 320 × 38\n   school sex      age address famsize Pstatus Medu     Fedu  Mjob  Fjob  reason\n   &lt;chr&gt;  &lt;fct&gt;  &lt;dbl&gt; &lt;fct&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;fct&gt;    &lt;fct&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; \n 1 GP     Female    18 Urban   GT3     A       higher … high… at_h… teac… course\n 2 GP     Female    17 Urban   GT3     T       primary… prim… at_h… other course\n 3 GP     Female    15 Urban   GT3     T       higher … 5th … heal… serv… home  \n 4 GP     Female    16 Urban   GT3     T       seconda… seco… other other home  \n 5 GP     Male      16 Urban   LE3     T       higher … seco… serv… other reput…\n 6 GP     Male      16 Urban   LE3     T       5th to … 5th … other other home  \n 7 GP     Female    17 Urban   GT3     A       higher … high… other teac… home  \n 8 GP     Male      15 Urban   LE3     A       seconda… 5th … serv… other home  \n 9 GP     Male      15 Urban   GT3     T       seconda… high… other other home  \n10 GP     Female    15 Urban   GT3     T       higher … high… teac… heal… reput…\n# ℹ 310 more rows\n# ℹ 27 more variables: guardian &lt;chr&gt;, traveltime &lt;dbl&gt;, studytime &lt;dbl&gt;,\n#   failures &lt;dbl&gt;, schoolsup &lt;chr&gt;, famsup &lt;chr&gt;, paid.x &lt;chr&gt;,\n#   activities &lt;chr&gt;, nursery &lt;chr&gt;, higher &lt;chr&gt;, internet &lt;chr&gt;,\n#   romantic &lt;chr&gt;, famrel &lt;dbl&gt;, freetime &lt;dbl&gt;, goout &lt;dbl&gt;, Dalc &lt;dbl&gt;,\n#   Walc &lt;dbl&gt;, health &lt;dbl&gt;, absences.x &lt;dbl&gt;, G1.x &lt;dbl&gt;, G2.x &lt;dbl&gt;,\n#   G3.x &lt;dbl&gt;, paid.y &lt;chr&gt;, absences.y &lt;dbl&gt;, G1.y &lt;dbl&gt;, G2.y &lt;dbl&gt;, …\n\n\nThe data looks good except that some of the column names have .x or .y. We will change these to _math and _port, respectively, to better reflect which data set they represent.\n\nnames(comb_data) &lt;- str_replace(names(comb_data), \"[.]x\", \"_math\")\nnames(comb_data) &lt;- str_replace(names(comb_data), \"[.]y\", \"_port\")\n\nWe check for missing data:\n\ncolSums(is.na(comb_data))\n\n       school           sex           age       address       famsize \n            0             0             0             0             0 \n      Pstatus          Medu          Fedu          Mjob          Fjob \n            0             0             0             0             0 \n       reason      guardian    traveltime     studytime      failures \n            0             0             0             0             0 \n    schoolsup        famsup     paid_math    activities       nursery \n            0             0             0             0             0 \n       higher      internet      romantic        famrel      freetime \n            0             0             0             0             0 \n        goout          Dalc          Walc        health absences_math \n            0             0             0             0             0 \n      G1_math       G2_math       G3_math     paid_port absences_port \n            0             0             0             0             0 \n      G1_port       G2_port       G3_port \n            0             0             0 \n\n\nNo missing values appear.\n\nCategorical variables\n\nUsing table(), we will create a one-way contingency table, a two-way contingency table, and a three-way contingency table using the factor variables Medu (all), Fedu (two-way and three-way), and address (three-way).\n\nAfter this, we will interpret a number from each resulting table (that is, pick out a value produced and explain what that value means).\n\n\n\nOne-way contingency table using the Medu factor variable\n\ntable(comb_data$Medu,dnn=list(\"Medu\"))\n\nMedu\n                         none primary education (4th grade) \n                            2                            37 \n             5th to 9th grade           secondary education \n                           84                            74 \n             higher education \n                          123 \n\n\n123 of the students’ mothers completed higher education.\n\n\nTwo-way contingency table using the Medu and Fedu factor variables\n\ntable(comb_data$Medu, comb_data$Fedu, dnn=list(\"Medu\",\"Fedu\"))\n\n                               Fedu\nMedu                            none primary education (4th grade)\n  none                             0                             0\n  primary education (4th grade)    1                            23\n  5th to 9th grade                 0                            21\n  secondary education              0                            12\n  higher education                 1                             1\n                               Fedu\nMedu                            5th to 9th grade secondary education\n  none                                         2                   0\n  primary education (4th grade)               11                   2\n  5th to 9th grade                            41                  16\n  secondary education                         18                  28\n  higher education                            17                  38\n                               Fedu\nMedu                            higher education\n  none                                         0\n  primary education (4th grade)                0\n  5th to 9th grade                             6\n  secondary education                         16\n  higher education                            66\n\n\n66 students had both mothers and fathers who completed higher education.\n\n\nThree-way contingency table\n\ntable(comb_data$Medu, comb_data$Fedu, comb_data$address,dnn=list(\"Medu\",\"Fedu\",\"address\"))\n\n, , address = Urban\n\n                               Fedu\nMedu                            none primary education (4th grade)\n  none                             0                             0\n  primary education (4th grade)    1                            17\n  5th to 9th grade                 0                            14\n  secondary education              0                             9\n  higher education                 1                             1\n                               Fedu\nMedu                            5th to 9th grade secondary education\n  none                                         2                   0\n  primary education (4th grade)                6                   0\n  5th to 9th grade                            31                  14\n  secondary education                         13                  26\n  higher education                            15                  34\n                               Fedu\nMedu                            higher education\n  none                                         0\n  primary education (4th grade)                0\n  5th to 9th grade                             4\n  secondary education                         11\n  higher education                            54\n\n, , address = Rural\n\n                               Fedu\nMedu                            none primary education (4th grade)\n  none                             0                             0\n  primary education (4th grade)    0                             6\n  5th to 9th grade                 0                             7\n  secondary education              0                             3\n  higher education                 0                             0\n                               Fedu\nMedu                            5th to 9th grade secondary education\n  none                                         0                   0\n  primary education (4th grade)                5                   2\n  5th to 9th grade                            10                   2\n  secondary education                          5                   2\n  higher education                             2                   4\n                               Fedu\nMedu                            higher education\n  none                                         0\n  primary education (4th grade)                0\n  5th to 9th grade                             2\n  secondary education                          5\n  higher education                            12\n\n\n12 students with rural addresses had both mothers and fathers who completed higher education.\n\nWe will create a conditional two-way table using table(), conditioning on address. We will do this by\n\nsubsetting the data (say with filter()), then creating the two-way table\ncreating a three-way table, then subsetting it\n\n\n\ncomb_data_1 &lt;- comb_data |&gt; filter(address == \"Urban\")\ntable(comb_data_1$Medu, comb_data_1$Fedu,dnn=list(\"Medu\",\"Fedu\"))\n\n                               Fedu\nMedu                            none primary education (4th grade)\n  none                             0                             0\n  primary education (4th grade)    1                            17\n  5th to 9th grade                 0                            14\n  secondary education              0                             9\n  higher education                 1                             1\n                               Fedu\nMedu                            5th to 9th grade secondary education\n  none                                         2                   0\n  primary education (4th grade)                6                   0\n  5th to 9th grade                            31                  14\n  secondary education                         13                  26\n  higher education                            15                  34\n                               Fedu\nMedu                            higher education\n  none                                         0\n  primary education (4th grade)                0\n  5th to 9th grade                             4\n  secondary education                         11\n  higher education                            54\n\n\nThis is the same as the “Urban” table above. We see that 1 urban student has a mother who completed higher education but a father who completed no education.\n\ncomb_data_2 &lt;- table(comb_data$Medu, comb_data$Fedu, comb_data$address,dnn=list(\"Medu\",\"Fedu\",\"address\"))\ncomb_data_2[ , , \"Urban\"]\n\n                               Fedu\nMedu                            none primary education (4th grade)\n  none                             0                             0\n  primary education (4th grade)    1                            17\n  5th to 9th grade                 0                            14\n  secondary education              0                             9\n  higher education                 1                             1\n                               Fedu\nMedu                            5th to 9th grade secondary education\n  none                                         2                   0\n  primary education (4th grade)                6                   0\n  5th to 9th grade                            31                  14\n  secondary education                         13                  26\n  higher education                            15                  34\n                               Fedu\nMedu                            higher education\n  none                                         0\n  primary education (4th grade)                0\n  5th to 9th grade                             4\n  secondary education                         11\n  higher education                            54\n\n\nThis is the same “Urban” table as above. We see that 4 urban students had fathers who completed higher education but mothers who only completed 5th to 9th grade.\n\nWe will create a two-way contingency table using group_by() on the factor variables sex and Medu. Then, we will use summarize() (getting the count) from dplyr. Finally, we will use pivot_wider() to make the result look more like the output from table().\n\n\ncomb_data_3 &lt;- comb_data |&gt; group_by(sex, Medu) |&gt; summarize(count=n()) |&gt; pivot_wider(names_from = Medu, values_from = \"count\")\n\n`summarise()` has grouped output by 'sex'. You can override using the `.groups`\nargument.\n\ncomb_data_3\n\n# A tibble: 2 × 6\n# Groups:   sex [2]\n  sex     none primary education (4th…¹ `5th to 9th grade` `secondary education`\n  &lt;fct&gt;  &lt;int&gt;                    &lt;int&gt;              &lt;int&gt;                 &lt;int&gt;\n1 Female     1                       22                 52                    42\n2 Male       1                       15                 32                    32\n# ℹ abbreviated name: ¹​`primary education (4th grade)`\n# ℹ 1 more variable: `higher education` &lt;int&gt;\n\n\n57 female students have mothers who completed higher education.\n\nCreate a stacked bar graph and a side-by-side bar graph. Give relevant x and y labels, and a title for the plots.\n\n\n#Stacked bar graph\ng &lt;- ggplot(data = comb_data |&gt; drop_na(sex, Fedu), aes(x = sex, fill = Fedu))\ng + geom_bar()+\n labs(x = \"Sex\", title = \"Counts of Fathers by Students' Genders in Two Portuguese Schools\", fill = \"Fathers' Educational Attainment\")+\n  scale_fill_discrete(\"Fathers' Educational Attainment\")\n\n\n\n\n\n\n\n\n\n#Side-by-side bar graph\ng &lt;- ggplot(data = comb_data |&gt; drop_na(sex, Fedu), aes(x = sex, fill = Fedu))\ng+geom_bar(position = \"dodge\") +\n labs(x = \"Sex\", title = \"Counts of Fathers by Students' Genders in Two Portuguese Schools\", fill = \"Fathers' Educational Attainment\")+\n scale_fill_discrete(\"Fathers' Educational Attainment\")\n\n\n\n\n\n\n\n\nThere are more female than male students (faster seen in the first bar chart!), and all of the female students’ fathers completed some amount of education.\n\n\n\nNumeric variables (and across groups)\nThe numeric variables are age, absences, and the three test grades variables (G1, G2, and G3) from each data set (math and Portuguese).\n\nWe will find measures of center and spread for age, absences_math, and G3_math.\n\n\ncomb_data_cs &lt;- comb_data |&gt; summarize(across(c(age,absences_math,G3_math),\n                   list(\"mean\" = mean, \"median\" = median, \"st_dev\" = sd, \"variance\" = var, \"IQR\" = IQR), \n                   .names = \"{.fn}_{.col}\"))\n\n\ncomb_data_cs\n\n# A tibble: 1 × 15\n  mean_age median_age st_dev_age variance_age IQR_age mean_absences_math\n     &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;              &lt;dbl&gt;\n1     16.5         16       1.14         1.30       1               5.41\n# ℹ 9 more variables: median_absences_math &lt;dbl&gt;, st_dev_absences_math &lt;dbl&gt;,\n#   variance_absences_math &lt;dbl&gt;, IQR_absences_math &lt;dbl&gt;, mean_G3_math &lt;dbl&gt;,\n#   median_G3_math &lt;dbl&gt;, st_dev_G3_math &lt;dbl&gt;, variance_G3_math &lt;dbl&gt;,\n#   IQR_G3_math &lt;dbl&gt;\n\n\nThe 75th percentile score on the final math exam was 16/20, while the 25th percentile score was 6/20.\n\nSubset by those who want to take higher education\n\n\n# cs = center spread\ncomb_data_cs_subset &lt;- comb_data |&gt; filter(higher == \"yes\") |&gt; summarize(across(c(age,absences_math,G3_math),\n                   list(\"mean\" = mean, \"median\" = median, \"st_dev\" = sd, \"variance\" = var, \"IQR\" = IQR), \n                   .names = \"{.fn}_{.col}\"))\n\ncomb_data_cs_subset\n\n# A tibble: 1 × 15\n  mean_age median_age st_dev_age variance_age IQR_age mean_absences_math\n     &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;              &lt;dbl&gt;\n1     16.5         16       1.10         1.21       1               5.21\n# ℹ 9 more variables: median_absences_math &lt;dbl&gt;, st_dev_absences_math &lt;dbl&gt;,\n#   variance_absences_math &lt;dbl&gt;, IQR_absences_math &lt;dbl&gt;, mean_G3_math &lt;dbl&gt;,\n#   median_G3_math &lt;dbl&gt;, st_dev_G3_math &lt;dbl&gt;, variance_G3_math &lt;dbl&gt;,\n#   IQR_G3_math &lt;dbl&gt;\n\n\nFor those students who want to undertake higher education, their Q1, median, and Q3 scores are the same as for the whole class.\n\nWe will find measures of center and spread, grouping across address, for age, absences_math, and G3_math.\n\n\n# csg1 = center spread (1 grouping variable)\ncomb_data_csg1 &lt;- comb_data |&gt; group_by(address) |&gt; summarize(across(c(age,absences_math,G3_math),\n                   list(\"mean\" = mean, \"median\" = median, \"st_dev\" = sd, \"variance\" = var, \"IQR\" = IQR), \n                   .names = \"{.fn}_{.col}\"))\n\ncomb_data_csg1\n\n# A tibble: 2 × 16\n  address mean_age median_age st_dev_age variance_age IQR_age mean_absences_math\n  &lt;fct&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;              &lt;dbl&gt;\n1 Urban       16.4         16       1.12         1.26       1               5.23\n2 Rural       17.0         17       1.12         1.26       2               6.12\n# ℹ 9 more variables: median_absences_math &lt;dbl&gt;, st_dev_absences_math &lt;dbl&gt;,\n#   variance_absences_math &lt;dbl&gt;, IQR_absences_math &lt;dbl&gt;, mean_G3_math &lt;dbl&gt;,\n#   median_G3_math &lt;dbl&gt;, st_dev_G3_math &lt;dbl&gt;, variance_G3_math &lt;dbl&gt;,\n#   IQR_G3_math &lt;dbl&gt;\n\n\nThe rural students have the same median absences as the urban students but greater mean absences, suggesting a skewed distribution: there are some rural students who miss a lot more of the classes than the urban students.\n\nNext, we find measures of center and spread across sex and address for age, absences_math, and G3_math.\n\n\n# csg2 = center spread (2 grouping variables)\ncomb_data_csg2 &lt;- comb_data |&gt; group_by(sex, address) |&gt; drop_na(sex, address) |&gt; summarize(across(c(age,absences_math,G3_math),\n                   list(\"mean\" = mean, \"median\" = median, \"st_dev\" = sd, \"variance\" = var, \"IQR\" = IQR), \n                   .names = \"{.fn}_{.col}\"))\n\n`summarise()` has grouped output by 'sex'. You can override using the `.groups`\nargument.\n\ncomb_data_csg2\n\n# A tibble: 4 × 17\n# Groups:   sex [2]\n  sex    address mean_age median_age st_dev_age variance_age IQR_age\n  &lt;fct&gt;  &lt;fct&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;\n1 Female Urban       16.5         16       1.04         1.08       1\n2 Female Rural       17.1         17       1.06         1.11       1\n3 Male   Urban       16.3         16       1.21         1.46       2\n4 Male   Rural       16.8         17       1.19         1.43       2\n# ℹ 10 more variables: mean_absences_math &lt;dbl&gt;, median_absences_math &lt;dbl&gt;,\n#   st_dev_absences_math &lt;dbl&gt;, variance_absences_math &lt;dbl&gt;,\n#   IQR_absences_math &lt;dbl&gt;, mean_G3_math &lt;dbl&gt;, median_G3_math &lt;dbl&gt;,\n#   st_dev_G3_math &lt;dbl&gt;, variance_G3_math &lt;dbl&gt;, IQR_G3_math &lt;dbl&gt;\n\n\nThere is more of a disparity in the median G3_math scores among urban females and males than among rural females and males. The rural students’ median ages are one year greater than the urban students’ ages.\n\nWe will create a correlation matrix between the numeric variables age, absences_math, absences_port, G1-G3 (math) and G1-G3 (port).\n\n\ncomb_data_subset &lt;- comb_data |&gt; select(age,absences_math,absences_port,G1_math,G2_math,G3_math,G1_port,G2_port,G3_port)\ncor(comb_data_subset)\n\n                       age absences_math absences_port     G1_math     G2_math\nage            1.000000000    0.14392517    0.04733182 -0.11037935 -0.18618740\nabsences_math  0.143925170    1.00000000    0.56381559 -0.06946116 -0.07580245\nabsences_port  0.047331821    0.56381559    1.00000000 -0.08760610 -0.12636236\nG1_math       -0.110379348   -0.06946116   -0.08760610  1.00000000  0.86588796\nG2_math       -0.186187399   -0.07580245   -0.12636236  0.86588796  1.00000000\nG3_math       -0.206031862   -0.02811847   -0.11664046  0.81859418  0.91357599\nG1_port       -0.050549678   -0.09247761   -0.09864117  0.59293522  0.54300736\nG2_port        0.029366456   -0.14516402   -0.12070727  0.59517224  0.56521350\nG3_port       -0.009103257   -0.13572638   -0.07145201  0.54388734  0.49603265\n                  G3_math     G1_port     G2_port      G3_port\nage           -0.20603186 -0.05054968  0.02936646 -0.009103257\nabsences_math -0.02811847 -0.09247761 -0.14516402 -0.135726385\nabsences_port -0.11664046 -0.09864117 -0.12070727 -0.071452010\nG1_math        0.81859418  0.59293522  0.59517224  0.543887345\nG2_math        0.91357599  0.54300736  0.56521350  0.496032649\nG3_math        1.00000000  0.52288461  0.54545279  0.475956497\nG1_port        0.52288461  1.00000000  0.88415041  0.825414320\nG2_port        0.54545279  0.88415041  1.00000000  0.894309821\nG3_port        0.47595650  0.82541432  0.89430982  1.000000000\n\n\nThe strongest positive correlations are between the test scores within a subject. This is perhaps not surprising, assuming that the instructor is the same and the instructional methodology is uniform. (The may be very big assumptions.) There is a slight positive correlation between absences and age, more noticeable for math than for Portuguese but not anywhere near the threshold to consider a strong relationship. There are weak negative correlations between test scores and age, except for G2_port (though this result could be due to outliers).\n\nWe will create a histogram, kernel density plot, and boxplot for G3_math and G3_port across address.\n\n\n# Histogram\nghm &lt;- ggplot(comb_data, aes(x = G3_math))\nghm + geom_histogram(aes(fill = address, col=I(\"black\")),position = \"identity\",binwidth=1) + scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\")) + xlab(\"Score on Final Math Exam, G3\") + ylab(\"Number of Students\") + ggtitle(str_wrap(\"Number of Students Who Achieved Score on Final Math Exam, by Address\",45)) + theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\nghp &lt;- ggplot(comb_data, aes(x = G3_port))\nghp + geom_histogram(aes(fill = address, col=I(\"black\")),position = \"identity\",binwidth=1) + scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\")) + xlab(\"Score on Final Portuguese Exam, G3\") + ylab(\"Number of Students\") + ggtitle(str_wrap(\"Number of Students Who Achieved Score on Final Portuguese Exam, by Address\",45)) + theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\n#ghm &lt;- ggplot(comb_data) +\n# geom_histogram(aes(x = G3_math, fill = address)) +\n# geom_histogram(aes(x = G3_port, fill = address), alpha = 0.5)\n#ghm\n\nFor the final math exam, aside from the number of students who scored 0, the distribution for the rural students looks normal and centered around a score of 10. The distribution for the urban students looks slightly bimodal. If we include the scores of 0, the urban distribution would be slightly left-skewed, which we can corroborate with our table above with measures of center and spread. For the final Portuguese exam, the distributions both appear left-skewed.\n\n# Kernel Density Plot\ngkdm &lt;- ggplot(comb_data, aes(x = G3_math))\ngkdm + geom_density(alpha = 0.5, aes(fill = address, col=I(\"black\"))) + scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\")) + xlab(\"Score on Final Math Exam, G3\") + ylab(\"Density of Students\") + ggtitle(str_wrap(\"Density of Students Who Achieved Score on Final Math Exam, by Address\",45)) + theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\ngkdp &lt;- ggplot(comb_data, aes(x = G3_port))\ngkdp + geom_density(alpha = 0.5, aes(fill = address, col=I(\"black\"))) + scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\")) + xlab(\"Score on Final Portuguese Exam, G3\") + ylab(\"Density of Students\") + ggtitle(str_wrap(\"Density of Students Who Achieved Score on Final Portuguese Exam, by Address\",45)) + theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\n#gkd &lt;- ggplot(comb_data) +\n#  geom_density(aes(x = G3_math, fill = address)) +\n#  geom_density(aes(x = G3_port, fill = address), alpha = 0.5)\n#gkd\n\nThe density plots corroborate what we saw with the histograms.\n\n# Boxplot\ngbpm &lt;- ggplot(comb_data)\ngbpm + geom_boxplot(aes(x = address, y = G3_math, fill = address)) + scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\")) + xlab(\"Score on Final Math Exam, G3\") + ylab(\"Exam Score\") + ggtitle(str_wrap(\"Box Plot of Student Scores on Final Math Exam, by Address\",45)) + theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\ngbpp &lt;- ggplot(comb_data)\ngbpp + geom_boxplot(aes(x = address, y = G3_port, fill = address)) + scale_fill_manual(values=c(\"#E69F00\", \"#56B4E9\")) + xlab(\"Score on Final Portuguese Exam, G3\") + ylab(\"Exam Score\") + ggtitle(str_wrap(\"Box Plot of Student Scores on Final Portuguese Exam, by Address\",45)) + theme(plot.title = element_text(hjust = 0.5))\n\n\n\n\n\n\n\n#comb_data_subset2 &lt;- comb_data |&gt; select(address, G3_math, G3_port)\n\n#gbp &lt;- ggplot(comb_data_subset2) +\n#  geom_boxplot(aes(x = address, y = G3_math, fill = address)) +\n#  geom_boxplot(aes(x = address, y = G3_port, fill = address), alpha = 0.5)\n#gbp\n\n#gbp &lt;- ggplot(comb_data, aes(x=address, y=c(G3_math,G3_port), fill=address)) + \n#    geom_boxplot(alpha=0.3) +\n#    theme(legend.position=\"none\") +\n#    scale_fill_brewer(palette=\"BuPu\")\n#gbp\n\nThe math boxplots indicate a wider IQR for urban students than for rural students. The median scores are similar, and there were students who reside in both areas that scored 0. The 0 scores were outliers; the maximum score for the rural students was also an outlier. The Portuguese boxplots indicate a narrower IQR for the urban students but a noticeably higher performance than with the rural students.\n\nCreate two scatterplots relating a G3 variable to other numeric variables (put G3 on the y-axis). You should jitter the points if they sit on top of each other. Color the points by a categorical variable in each. Add appropriate labels and titles.\n\n\ng1 &lt;- ggplot(comb_data |&gt; drop_na(age, G3_math, address),\n aes(x = age, y = G3_math, color = address))\ng1 + geom_point() +\n scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\")) +\n geom_jitter(width = 0.2, alpha = 0.3)\n\n\n\n\n\n\n\ng2 &lt;- ggplot(comb_data |&gt; drop_na(age, G3_math, address),\n aes(x = absences_math, y = G3_math, color = address))\ng2 + geom_point() + \n scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\")) +\n geom_jitter(width = 0.2, alpha = 0.3)\n\n\n\n\n\n\n\n\nThe highest score is attained by 16 year olds, with students up to the age of 22 being enrolled. However, the spread in scores is higher for younger students. Most students missed under 30 math classes. Several urban students missed more than 50 classes, while one of the rural students missed more than 70 classes. The students who performed best did not miss the fewest classes, though lower scores were associated with increased absences (except in the case of students who scored 0 on the exam). The 0 scores, with 0 absences, could indicate something wrong with the attendance accounting for the course. Comparing with an above table, we see that some of the students who scored 0 also scored 0 on the second exam, but above 0 on the first exam.\n\nNow, we will repeat the scatter plot step but use faceting to obtain graphs at each setting of Medu.\n\n\ng1 &lt;- ggplot(comb_data |&gt; drop_na(age, G3_math, Medu),\n aes(x = age, y = G3_math, color = Medu))\ng1 + geom_point() +\n geom_jitter(width = 0.2, alpha = 0.3) +\n facet_wrap(~ Medu)\n\n\n\n\n\n\n\ng2 &lt;- ggplot(comb_data |&gt; drop_na(age, G3_math, Medu),\n aes(x = absences_math, y = G3_math, color = Medu))\ng2 + geom_point() +\n geom_jitter(width = 0.2, alpha = 0.3) + \n facet_wrap(~ Medu)\n\n\n\n\n\n\n\n\nThe students with the highest scores all have mothers who, at a minimum, completed 5th to 9th grade. We can see that most students have fewer than 20 absences from math class. The outlier absences, noted above, appear in the scatter plot of G3 math scores versus absences from math class for students whose mothers completed secondary education. To infer anything relationship from this, however, would be highly dubious.\n\nFinally, we will repeat the scatter plot step but use faceting to obtain graphs at each combination of address and Medu.\n\n\ng1 &lt;- ggplot(comb_data |&gt; drop_na(age, G3_math, address, Medu),\n aes(x = age, y = G3_math, color = address))\ng1 + geom_point() +\n geom_jitter(width = 0.2, alpha = 0.3) + \n scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\")) +\n facet_wrap(Medu ~ address)\n\n\n\n\n\n\n\ng2 &lt;- ggplot(comb_data |&gt; drop_na(absences_math, G3_math, address, Medu),\n aes(x = absences_math, y = G3_math, color = address))\ng2 + geom_point() +\n geom_jitter(width = 0.2, alpha = 0.3) + \n scale_color_manual(values=c(\"#E69F00\", \"#56B4E9\")) +\n facet_wrap(Medu ~ address)\n\n\n\n\n\n\n\n\nThe urban students whose mothers completed less education tended to have better scores on the math exam than their rural counterparts. As the mothers’ levels of education increased, the test scores did as well, and younger urban students slightly outperformed their older counterparts, which was opposite to the rural students. Also, the higher the education level completed by the mothers, the less that absences impacted the exam scores."
  }
]